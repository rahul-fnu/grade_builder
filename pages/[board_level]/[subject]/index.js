import Head from 'next/head'
import styles from '../../../styles/Subject.module.css'
import { useRouter } from 'next/router'
import QuestionCard from './question_card';


export default function Subject({ questions }) {
    const router = useRouter();
    const { subject_name, board_level } = router.query;
    return (
        <div className={styles.container}>
            <Head>
                <title>{board_level + ' ' + subject_name}</title>
                <meta name='description' content='Generated by Saif the human' />
                <link rel='icon' href='/favicon.ico' />
            </Head>
            <main className={styles.main}>
                <h1 className={styles.title}>Subject page</h1>
                <br />
                <div className={styles.grid}>
                    {questions.map(question => <QuestionCard q={question} />)}
                </div>
            </main>
        </div>
    );
}
    

Subject.getInitialProps = async (ctx) => {
    const res = await fetch(`http://${ctx.req.headers.host}/api/questions`);
    const questions = (await res.json()).data

    return {
        questions: questions
    }
}